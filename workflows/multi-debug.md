## Multi-Debug - 多 Agent 并行调试

### 描述
当遇到 3+ 个独立问题时，使用多个 agent 并行分析每个问题，最后整合修复方案。

### 触发条件
- 存在 3 个或以上的独立问题
- 问题之间没有依赖关系
- 需要快速定位根因

### 前置条件 (preconditions)

```yaml
checks:
  - name: project_accessible
    description: 项目代码可访问
    weight: 20
  - name: errors_identified
    description: 错误信息已收集
    weight: 15
  - name: context_available
    description: 问题上下文已提供
    weight: 10

threshold: 30

destructive: []
```

### 执行配置
- **模式**: lenient
- **偏差处理**: warn

### 步骤

#### Step 1: 问题分类

- **关键**: true
- **依赖**: []
- **Agent**: none (主对话)
- **并行**: false
- **输出**: 问题分组列表
- **验收**: 所有问题已分类

**任务**: 将用户提供的所有问题按领域分组（前端、后端、配置、依赖等），识别独立问题。

**输出格式**:
```yaml
前端问题:
  - 问题 A
  - 问题 B

后端问题:
  - 问题 C

依赖问题:
  - 问题 D
```

---

#### Step 2: 并行分析 (并行: 是)

- **关键**: true
- **依赖**: [1]
- **Agent**: analyzer (多个并发)
- **并行**: true
- **输出**: 每个问题的根因分析
- **验收**: 每个问题都有分析结果

**任务**: 为每个独立问题启动一个 analyzer agent，分析根因。

**执行方式**: 使用 Task 工具并发启动多个 general-purpose agent，每个 agent 分析一个问题

---

#### Step 3: 结果整合

- **关键**: true
- **依赖**: [2]
- **Agent**: integrator
- **并行**: false
- **输出**: 综合修复方案
- **验收**: 所有问题有修复方案

**任务**: 收集所有 analyzer 的输出，整合成一份综合修复方案。

**整合内容**:
- 按优先级排序问题
- 识别共同根因
- 合并相似修复
- 规划修复顺序

---

#### Step 4: 协调修复

- **关键**: false
- **依赖**: [3]
- **Agent**: implementer
- **并行**: false
- **输出**: 修复结果
- **验收**: 修复通过测试

**任务**: 按整合的方案执行修复，处理文件冲突和依赖关系。

**注意事项**:
- 检查文件冲突
- 按依赖顺序修复
- 验证每个修复
- 运行测试确认

---

## 示例使用场景

```yaml
场景: 用户报告多个问题
  1. 登录按钮无响应
  2. API 返回 500 错误
  3. 页面样式错乱
  4. 图片加载失败

执行:
  Step 1: 分类
    → 前端: 1, 3
    → 后端: 2
    → 资源: 4

  Step 2: 并发分析
    → Agent 1: 分析登录按钮
    → Agent 2: 分析 API 500
    → Agent 3: 分析样式错乱
    → Agent 4: 分析图片加载

  Step 3: 整合
    → 综合修复方案

  Step 4: 执行修复
    → 按顺序修复问题
```
